<!-- Ultimate Premium Study Journey - Single Row with Advanced Features (FIXED) -->
<section class="journey-section">
  <!-- Background elements -->
  <div class="journey-bg-pattern"></div>
  <div class="journey-accent-shape"></div>
  
  <h2 class="journey-heading">Your Path to International Education</h2>
  
  <div class="journey-container">
    <!-- Step 1 -->
    <div class="journey-step active" data-step="1">
      <div class="step-card">
        <div class="step-number">1</div>
        <div class="step-icon-container">
          <div class="step-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="11" cy="11" r="8" stroke="var(--apply-primary)" stroke-width="2"/>
              <path d="M21 21L16.65 16.65" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="step-icon-ring"></div>
        </div>
        <h3 class="step-title">Search</h3>
        <p class="step-description">Surf through 21K+ courses from 75+ universities across Turkish Countries</p>
      </div>
      
      <!-- Connector -->
      <div class="step-connector">
        <svg viewBox="0 0 60 20" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
          <path 
            d="M0,10 C15,0 45,0 60,10" 
            stroke="var(--apply-primary)" 
            stroke-width="2" 
            stroke-dasharray="4 4" 
            fill="none" 
            class="connector-path" 
          />
        </svg>
      </div>
    </div>
    
    <!-- Step 2 -->
    <div class="journey-step" data-step="2">
      <div class="step-card">
        <div class="step-number">2</div>
        <div class="step-icon-container">
          <div class="step-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18 20V10" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round"/>
              <path d="M12 20V4" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round"/>
              <path d="M6 20V14" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="step-icon-ring"></div>
        </div>
        <h3 class="step-title">Compare</h3>
        <p class="step-description">Compare, analyse and narrow down your options all in one place</p>
      </div>
      
      <!-- Connector -->
      <div class="step-connector">
        <svg viewBox="0 0 60 20" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
          <path 
            d="M0,10 C15,0 45,0 60,10" 
            stroke="var(--apply-primary)" 
            stroke-width="2" 
            stroke-dasharray="4 4" 
            fill="none" 
            class="connector-path" 
          />
        </svg>
      </div>
    </div>
    
    <!-- Step 3 -->
    <div class="journey-step" data-step="3">
      <div class="step-card">
        <div class="step-number">3</div>
        <div class="step-icon-container">
          <div class="step-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16 3.13C16.8604 3.3503 17.623 3.8507 18.1676 4.55231C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89317 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="step-icon-ring"></div>
        </div>
        <h3 class="step-title">Connect</h3>
        <p class="step-description">Meet our team of certified counsellors and get FREE guidance</p>
      </div>
      
      <!-- Connector -->
      <div class="step-connector">
        <svg viewBox="0 0 60 20" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
          <path 
            d="M0,10 C15,0 45,0 60,10" 
            stroke="var(--apply-primary)" 
            stroke-width="2" 
            stroke-dasharray="4 4" 
            fill="none" 
            class="connector-path" 
          />
        </svg>
      </div>
    </div>
    
    <!-- Step 4 -->
    <div class="journey-step" data-step="4">
      <div class="step-card">
        <div class="step-number">4</div>
        <div class="step-icon-container">
          <div class="step-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M14 2V8H20" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16 13H8" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16 17H8" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M10 9H9H8" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="step-icon-ring"></div>
        </div>
        <h3 class="step-title">Apply</h3>
        <p class="step-description">Get assistance to apply for your student VISA</p>
      </div>
      
      <!-- Connector -->
      <div class="step-connector">
        <svg viewBox="0 0 60 20" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
          <path 
            d="M0,10 C15,0 45,0 60,10" 
            stroke="var(--apply-primary)" 
            stroke-width="2" 
            stroke-dasharray="4 4" 
            fill="none" 
            class="connector-path" 
          />
        </svg>
      </div>
    </div>
    
    <!-- Step 5 -->
    <div class="journey-step" data-step="5">
      <div class="step-card">
        <div class="step-number">5</div>
        <div class="step-icon-container">
          <div class="step-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 15L8.5 11.5L9.91 10.09L12 12.17L16.59 7.58L18 9L12 15Z" fill="var(--apply-primary)"/>
              <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z" fill="#FBE9E9"/>
            </svg>
          </div>
          <div class="step-icon-ring"></div>
        </div>
        <h3 class="step-title">Start your studies</h3>
        <p class="step-description">Finally, get started with your new study journey</p>
      </div>
    </div>
  </div>
  
  <!-- Mobile View -->
  <div class="journey-mobile">
    <div class="mobile-slides">
      <!-- Mobile Step 1 -->
      <div class="mobile-slide active" data-step="1">
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-step-number">1</div>
            <h3>Search</h3>
          </div>
          <div class="mobile-card-body">
            <div class="mobile-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="11" cy="11" r="8" stroke="var(--apply-primary)" stroke-width="2"/>
                <path d="M21 21L16.65 16.65" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <p>Surf through +21K courses from 75+ universities across the Turkish Countries</p>
          </div>
        </div>
      </div>

      <!-- Mobile Step 2 -->
      <div class="mobile-slide" data-step="2">
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-step-number">2</div>
            <h3>Compare</h3>
          </div>
          <div class="mobile-card-body">
            <div class="mobile-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 20V10" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round"/>
                <path d="M12 20V4" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round"/>
                <path d="M6 20V14" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <p>Compare, analyse and narrow down your options all in one place</p>
          </div>
        </div>
      </div>

      <!-- Mobile Step 3 -->
      <div class="mobile-slide" data-step="3">
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-step-number">3</div>
            <h3>Connect</h3>
          </div>
          <div class="mobile-card-body">
            <div class="mobile-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 3.13C16.8604 3.3503 17.623 3.8507 18.1676 4.55231C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89317 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <p>Meet our team of certified counsellors and get FREE guidance</p>
          </div>
        </div>
      </div>

      <!-- Mobile Step 4 (FIXED) -->
      <div class="mobile-slide" data-step="4">
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-step-number">4</div>
            <h3>Apply</h3>
          </div>
          <div class="mobile-card-body">
            <div class="mobile-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M14 2V8H20" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 13H8" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 17H8" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 9H9H8" stroke="var(--apply-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <p>Get assistance to apply for your student VISA</p>
          </div>
        </div>
      </div>

      <!-- Mobile Step 5 (FIXED) -->
      <div class="mobile-slide" data-step="5">
        <div class="mobile-card">
          <div class="mobile-card-header">
            <div class="mobile-step-number">5</div>
            <h3>Start your studies</h3>
          </div>
          <div class="mobile-card-body">
            <div class="mobile-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 15L8.5 11.5L9.91 10.09L12 12.17L16.59 7.58L18 9L12 15Z" fill="var(--apply-primary)"/>
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z" fill="#FBE9E9"/>
              </svg>
            </div>
            <p>Finally, get started with your new study journey</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Mobile navigation -->
    <div class="mobile-navigation">
      <button class="mobile-prev" disabled>&larr;</button>
      <div class="mobile-indicators">
        <span class="mobile-indicator active" data-step="1"></span>
        <span class="mobile-indicator" data-step="2"></span>
        <span class="mobile-indicator" data-step="3"></span>
        <span class="mobile-indicator" data-step="4"></span>
        <span class="mobile-indicator" data-step="5"></span>
      </div>
      <button class="mobile-next">&rarr;</button>
    </div>
  </div>
</section>


<script>
// Enhanced journey interactions with fixed mobile navigation
document.addEventListener('DOMContentLoaded', function() {
  // Desktop journey
  const journeySteps = document.querySelectorAll('.journey-step');
  
  // Initialize with animations
  journeySteps.forEach((step, index) => {
    // Set initial state
    step.style.opacity = 0;
    step.style.transform = 'translateY(30px)';
    
    // Animate in with staggered delay
    setTimeout(() => {
      step.style.transition = 'opacity 0.6s ease, transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
      step.style.opacity = 1;
      step.style.transform = 'translateY(0)';
    }, 200 * index);
  });
  
  // Step click handler
  journeySteps.forEach((step) => {
    step.addEventListener('click', function() {
      // Remove active class from all steps
      journeySteps.forEach(s => s.classList.remove('active'));
      
      // Add active class to clicked step
      this.classList.add('active');
    });
  });
  
  // Mobile journey - Fixed implementation
  const mobileSlides = document.querySelectorAll('.mobile-slide');
  const mobileIndicators = document.querySelectorAll('.mobile-indicator');
  const prevBtn = document.querySelector('.mobile-prev');
  const nextBtn = document.querySelector('.mobile-next');
  
  // Verify there are slides to navigate
  if (mobileSlides.length > 0) {
    let currentSlide = 0;
    const totalSlides = mobileSlides.length;
    
    // Ensure proper initial state
    function updateNavButtons() {
      if (prevBtn) prevBtn.disabled = currentSlide === 0;
      if (nextBtn) nextBtn.disabled = currentSlide === totalSlides - 1;
    }
    
    // Navigation function - simplified and more robust
    function goToSlide(index) {
      // Validate index is within bounds
      if (index < 0 || index >= totalSlides) return;
      
      // Update slides
      mobileSlides.forEach((slide) => {
        slide.classList.remove('active');
      });
      
      mobileSlides[index].classList.add('active');
      
      // Update indicators
      mobileIndicators.forEach((indicator) => {
        indicator.classList.remove('active');
      });
      
      if (mobileIndicators[index]) {
        mobileIndicators[index].classList.add('active');
      }
      
      // Update current slide
      currentSlide = index;
      
      // Update button states
      updateNavButtons();
    }
    
    // Navigation event listeners - improved error handling
    if (prevBtn) {
      prevBtn.addEventListener('click', function(e) {
        e.preventDefault();
        if (currentSlide > 0) {
          goToSlide(currentSlide - 1);
        }
      });
    }
    
    if (nextBtn) {
      nextBtn.addEventListener('click', function(e) {
        e.preventDefault();
        if (currentSlide < totalSlides - 1) {
          goToSlide(currentSlide + 1);
        }
      });
      
      // Ensure next button is enabled initially if there are more slides
      if (totalSlides > 1) {
        nextBtn.disabled = false;
      }
    }
    
    // Indicator clicks - with validation
    mobileIndicators.forEach(function(indicator, index) {
      indicator.addEventListener('click', function() {
        if (index >= 0 && index < totalSlides) {
          goToSlide(index);
        }
      });
    });
    
    // Touch swipe for mobile
    let touchStartX = 0;
    let touchEndX = 0;
    
    const mobileSlider = document.querySelector('.mobile-slides');
    
    if (mobileSlider) {
      mobileSlider.addEventListener('touchstart', function(e) {
        touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });
      
      mobileSlider.addEventListener('touchend', function(e) {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
      }, { passive: true });
    }
    
    function handleSwipe() {
      const swipeThreshold = 50;
      
      if (touchEndX < touchStartX - swipeThreshold && currentSlide < totalSlides - 1) {
        // Swipe left - next slide
        goToSlide(currentSlide + 1);
      } else if (touchEndX > touchStartX + swipeThreshold && currentSlide > 0) {
        // Swipe right - previous slide
        goToSlide(currentSlide - 1);
      }
    }
    
    // Set initial state
    updateNavButtons();
  }
  
  // Intersection Observer for animation on scroll
  if ('IntersectionObserver' in window) {
    const journeySection = document.querySelector('.journey-section');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          // Restart animations when scrolled into view
          journeySteps.forEach((step, index) => {
            step.style.opacity = 0;
            step.style.transform = 'translateY(30px)';
            
            setTimeout(() => {
              step.style.transition = 'opacity 0.6s ease, transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
              step.style.opacity = 1;
              step.style.transform = 'translateY(0)';
            }, 100 * index);
          });
          
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.2
    });
    
    if (journeySection) {
      observer.observe(journeySection);
    }
  }
});
</script>